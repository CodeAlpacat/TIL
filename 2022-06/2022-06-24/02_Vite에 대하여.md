## 2. Vite

### 기존 webpack

- `CRA(Create React App)`는 Webpack 기반의 리액트 기본 보일러 플레이트(최소한의 변경으로 여러 곳에서 재사용되는 기능 및 코드)이다.
- JS는 인터프리터 언어이기에 `low-level` 인 Go 언어보다 느릴 수 밖에 없다. 
- HMR(Hot Module Replacement) 사용 => 모듈 전체를 다시 로드하지 않고, 변경 부분만 교환, 추가, 제거하는 방식



### Vite

- Webpack이 아닌 매우 빠른 Go 언어를 기반으로한 `EsBuild` 자바스크립트 빌드 툴을 사용
- vite는 자바스크립트 파일을 두 개로 나눠 빌드한다.
  - 개발하는 동안 바뀌지 않는 의존성(`dependencies`)  ex) `node_modules`폴더
    - 라이브러리 설치 등 바뀌는 시점마다 매번 번들링을 해놔서 크기가 매우 큰 node_modules 폴더가 하나의 js파일로 합쳐지는 번들링에 시간을 잡아먹지 않음.
    - webpack은 브라우저 요청 이전에 모든 파일을 번들링해 하나로 모으지만, vite는 이 `node_modules`라는 의존성 폴더만 미리  `esbuild`를 이용해 빠르게 번들링함.
  - 소스코드
    - 자주 수정됨
    - 소스코드 전체가 동시에 로드되지 않아도 된다.

#### **방식의 차이

- `webpack`

  - 기존에는 `dev server` 즉, 빌드 시작 시에 `webpack`이 모든 자바스크립트를 한 곳에 모아 번들링 한 후에 브라우저에 하나의 파일을 던져주는 방식이었음.

  

- vite는 `Native ESM` 즉, 자바스크립트 공식 모듈을 사용해 **브라우저**에서 필요한 소스코드만을 요청해 받아오는 방식을 사용한다.
  - **Webpack**은 소스코드를 업데이트하면 새로이 번들링을 진행한다. HMR을 사용하더라도 앱 사이즈가 커지면 무거워진 하나의 파일은 선형적으로 갱신 시간이 증가한다.
  - **Vite**는 하나로 묶는 과정이 없이 브라우저가 교체된 모듈만을 요청해 가져오는 방식으로 HMR을 이용하므로 앱 사이즈가 커져도 갱신 시간에 영향이 없다.



![번들러 기반의 개발 서버](https://vitejs-kr.github.io/assets/bundler.37740380.png)

![ESM 기반의 개발 서버](https://vitejs-kr.github.io/assets/esm.3070012d.png)